<head>
    <link rel="stylesheet" type="text/css" href="css-ardan.css">
</head>
<body>
    <h1 align="center">Trivial pursuit question generator</h1>

    <select id="category" value="Category">
        <option value="Geography"></option>
        <option value="Entertainment"></option>
        <option value="History"></option>
        <option value="Arts and literature"></option>
        <option value="science and nature"></option>
        <option value="sports and leisure"></option>- 
    </select>

    <select id="difficulty" value="difficulty">

    </select>

    <input type="button" value="Show Question" onclick="showQuestion()"><br>

    <div id="myDiv02"></div>

    <select id="options">
        <option id="option01"></option>
        <option id="option02"></option>
        <option id="option03"></option>
        <option id="option04"></option>
    </select>
    
    <input type="button" value="Submit" onclick="checkAnswer()">
    
    <script>
        let correctAnswer = ''; // Store the correct answer globally
    
        async function showQuestion() {
            try {
                const response = await fetch("https://opentdb.com/api.php?amount=1&category=9&difficulty=easy&type=multiple");
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
    
                // Parse JSON response
                const data = await response.json();
                const result = data.results[0];
    
                // Display the question
                document.getElementById('myDiv02').innerHTML = `<p>${result.question}</p>`;
    
                // Shuffle and add answers (correct and incorrect) to the select box
                const answers = result.incorrect_answers;
                correctAnswer = result.correct_answer;
                answers.push(correctAnswer);
                shuffle(answers); // Shuffle answers
    
                // put answers into select boxes
                const selectBox = document.getElementById('options');
                selectBox.innerHTML = ''; // Clear previous options
    
                answers.forEach((answer, index) => {
                    const option = document.createElement('option');
                    option.value = answer;
                    option.textContent = answer;
                    option.id = `option0${index + 1}`;
                    selectBox.appendChild(option);
                });
            } catch (error) {
                console.error("Error fetching question: ", error);
            }
        }
    
        function checkAnswer() {
            const selectedAnswer = document.getElementById('options').value;
            if (selectedAnswer === correctAnswer) {
                alert("Correct!");
            } else {
                alert("Incorrect, try again!");
            }
        }
    
        // Helper function to shuffle array elements
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
    </script>
    
</body>
</html>
